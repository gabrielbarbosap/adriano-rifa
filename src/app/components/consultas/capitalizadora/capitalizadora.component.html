<nb-layout>
  <nb-layout-column>
    <nb-card>
      <nb-card-header
        >Consulta de Capitalizadoras Cadastradas
        <button nbButton class="button-success" routerLink="../capitalizadora">
          <nb-icon icon="folder-add-outline"></nb-icon></button
      ></nb-card-header>
      <nb-card-body>
        <!-- Filtros -->
        <div class="filters">
          <form [formGroup]="filtroForm" class="form-inline">
            <div class="filter-row">
              <div class="form-group">
                <label for="filtroCnpj">CNPJ</label>
                <nb-select
                  fullWidth
                  placeholder="Selecione o CNPJ"
                  formControlName="filtroCnpj"
                  size="small"
                >
                  <nb-option *ngFor="let cnpj of cnpjs" [value]="cnpj">
                    {{ cnpj }}
                  </nb-option>
                </nb-select>
              </div>
              <div class="form-group">
                <label for="filtroRazaoSocial">Razão Social</label>
                <nb-select
                  fullWidth
                  placeholder="Selecione a Razão Social"
                  formControlName="filtroRazaoSocial"
                  size="small"
                >
                  <nb-option
                    *ngFor="let razaoSocial of razoesSociais"
                    [value]="razaoSocial"
                  >
                    {{ razaoSocial }}
                  </nb-option>
                </nb-select>
              </div>
              <div class="form-group">
                <label for="filtroCidade">Cidade</label>
                <nb-select
                  fullWidth
                  placeholder="Selecione a Cidade"
                  formControlName="filtroCidade"
                  size="small"
                >
                  <nb-option *ngFor="let cidade of cidades" [value]="cidade">
                    {{ cidade }}
                  </nb-option>
                </nb-select>
              </div>
              <div class="form-group">
                <label for="filtroUf">UF</label>
                <nb-select
                  fullWidth
                  placeholder="Selecione o UF"
                  formControlName="filtroUf"
                  size="small"
                >
                  <nb-option *ngFor="let uf of uf" [value]="uf">
                    {{ uf }}
                  </nb-option>
                </nb-select>
              </div>
            </div>

            <!-- Botões de Aplicar Filtros e Limpar -->
            <div class="filter-actions">
              <button
                nbButton
                status="primary"
                size="small"
                (click)="aplicarFiltros()"
              >
                Aplicar Filtros
              </button>
              <button
                nbButton
                status="warning"
                size="small"
                (click)="limparFiltros()"
              >
                Limpar Filtros
              </button>
            </div>
          </form>
        </div>

        <!-- Tabela de Resultados -->
        <div class="table-container">
          <table class="custom-table">
            <thead>
              <tr>
                <th>CNPJ</th>
                <th>Razão Social</th>
                <th>Cidade</th>
                <th>UF</th>
                <th>Telefone Fixo</th>
                <th>Celular</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="
                  let capitalizadora of capitalizadorasPaginadas;
                  let i = index
                "
              >
                <td>{{ capitalizadora.cnpj }}</td>
                <td>{{ capitalizadora.razao_social }}</td>
                <td>{{ capitalizadora.cidade }}</td>
                <td>{{ capitalizadora.uf }}</td>
                <td>{{ capitalizadora.fone_fixo }}</td>
                <td>{{ capitalizadora.fone_movel }}</td>
                <td>
                  <button
                    (click)="editarCapitalizadora(capitalizadora)"
                    nbButton
                  >
                    <nb-icon icon="edit-2-outline"></nb-icon>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Paginação -->
        <div class="pagination">
          <button
            nbButton
            status="primary"
            (click)="paginaAnterior()"
            [disabled]="paginaAtual === 1"
          >
            Anterior
          </button>
          <span>Página {{ paginaAtual }} de {{ totalPaginas }}</span>
          <button
            nbButton
            status="primary"
            (click)="proximaPagina()"
            [disabled]="paginaAtual === totalPaginas"
          >
            Próxima
          </button>
        </div>
      </nb-card-body>
    </nb-card>
  </nb-layout-column>
</nb-layout>
